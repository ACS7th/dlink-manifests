# Base 디렉토리 포함
bases:
  - ../../base

# 패치 적용 (각 네임스페이스별 Deployment 설정)
patches:
  - target:
      kind: Deployment
      name: dlk-be-alcohol-alcohol-deploy
      namespace: dlk-be-alcohol
    path: patches/alcohol-patch.yaml

  - target:
      kind: Deployment
      name: dlk-be-alcohol-highball-deploy
      namespace: dlk-be-alcohol
    path: patches/highball-patch.yaml

  - target:
      kind: Deployment
      name: dlk-be-alcohol-review-deploy
      namespace: dlk-be-alcohol
    path: patches/review-patch.yaml

  - target:
      kind: Deployment
      name: dlk-be-auth-auth-deploy
      namespace: dlk-be-auth
    path: patches/auth-patch.yaml

  - target:
      kind: Deployment
      name: dlk-be-pairing-pairing-deploy
      namespace: dlk-be-pairing
    path: patches/pairing-patch.yaml

  - target:
      kind: Deployment
      name: dlk-fe-next-deploy
      namespace: dlk-fe-next
    path: patches/next-patch.yaml

  - target:
      kind: Deployment
      name: dlk-gateway-gateway-deploy
      namespace: dlk-gateway
    path: patches/gateway-patch.yaml

# 프라이빗 ECR 인증을 위한 시크릿 추가 (모든 네임스페이스에 적용)
secretGenerator:
  - name: ecr-secret
    type: kubernetes.io/dockerconfigjson
    literals:
      - ".dockerconfigjson=$(aws ecr get-login-password --region ap-northeast-2 | docker login --username AWS --password-stdin 084550838259.dkr.ecr.ap-northeast-2.amazonaws.com)"

